sudo: false
language: rust
rust:
  - nightly
  - beta
  - stable
env:
  global:
    - CC=gcc-4.8
    - CXX=g++-4.8
    - export PATH="$PATH:$HOME/bin"
    - export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:$HOME/lib"
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gcc-4.8
      - g++-4.8
install:
  - git clone https://github.com/kentonv/capnproto.git
  - cd capnproto/c++
  - ./setup-autotools.sh
  - autoreconf -i
  - ./configure --prefix=$HOME
  - make -j3
  - make install
  - cd ../..
script:
  - cargo build
  - cargo doc
